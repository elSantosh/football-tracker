<!DOCTYPE html>

<!-- 
	Simple usage of JSON requests with the Open Football DB.

	Finds all games from Round 4 that FC Bayern plays in, and displays the date and match details.
-->

<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>

<body>

	<div id="content">
	</div>


	<script>
		$.getJSON("http://footballdb.herokuapp.com/api/v1/event/de.2014_15/round/4?callback=?", function(data) {

			var obj = data;
			var gameArr = [];
			var rawGameLength;

			rawGameLength = obj.games.length;

			// parse game objects and store into an array
			for(var i=0; i < rawGameLength; i++) {
				gameArr.push(obj.games[i]);
			}

			// run through each game object and search team1 and team2 keys for FC Bayern
			for(var j=0; j < rawGameLength; j++) {

				if(gameArr[j].team1_key === "bayern" || gameArr[j].team2_key === "bayern") {
					$("#content").append("<h2>" + gameArr[j].play_at + "</h2>");
					$("#content").append("<p>" + gameArr[j].team1_title + " v. " + gameArr[j].team2_title + "</p>");
				}

			}

		});
	</script>

</body>

